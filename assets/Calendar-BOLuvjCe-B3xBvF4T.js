import{T as c,M as a}from"./index-DG-X5MhE.js";const K=({selectedDate:h,onDateSelect:f,fullyBookedDates:x})=>{const[o,v]=c.useState(new Date),j=c.useMemo(()=>{const t=new Date;t.setHours(0,0,0,0);const e=h||t;return e.setHours(0,0,0,0),e},[h]),[s,b]=c.useState(j),p=c.useRef(new Map),D="calendar-heading",m=(t,e)=>{const r=new Date(t),g=r.getDate();r.setMonth(r.getMonth()+e,1);const l=new Date(r.getFullYear(),r.getMonth()+1,0).getDate();return r.setDate(Math.min(g,l)),r};c.useEffect(()=>{(s.getMonth()!==o.getMonth()||s.getFullYear()!==o.getFullYear())&&v(new Date(s.getFullYear(),s.getMonth(),1))},[s,o]),c.useEffect(()=>{const t=s.toISOString().split("T")[0],e=p.current.get(t);e&&e.focus()},[s]);const M=["Min","Sen","Sel","Rab","Kam","Jum","Sab"],S=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],N=t=>{t.preventDefault();let e=new Date(s);switch(t.key){case"ArrowRight":e.setDate(e.getDate()+1);break;case"ArrowLeft":e.setDate(e.getDate()-1);break;case"ArrowUp":e.setDate(e.getDate()-7);break;case"ArrowDown":e.setDate(e.getDate()+7);break;case"PageUp":e=m(s,t.shiftKey?-12:-1);break;case"PageDown":e=m(s,t.shiftKey?12:1);break;case"Home":e.setDate(e.getDate()-e.getDay());break;case"End":e.setDate(e.getDate()+(6-e.getDay()));break;case"Enter":case" ":const r=new Date;r.setHours(0,0,0,0);const g=s.toISOString().split("T")[0];s>=r&&!x.has(g)&&f(s);return;default:return}b(e)},T=()=>{b(t=>m(t,-1))},F=()=>{b(t=>m(t,1))},H=t=>{b(t),f(t)},I=c.useMemo(()=>{const t=new Date(o.getFullYear(),o.getMonth(),1),e=new Date(o.getFullYear(),o.getMonth()+1,0),r=t.getDay(),g=e.getDate(),l=[];let n=[];for(let i=0;i<r;i++)n.push(null);for(let i=1;i<=g;i++)n.length===7&&(l.push(n),n=[]),n.push(new Date(o.getFullYear(),o.getMonth(),i));for(;n.length<7;)n.push(null);return l.push(n),l},[o]);return a.jsxs("div",{className:"bg-white dark:bg-slate-700 border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("button",{type:"button",onClick:T,"aria-label":"Bulan sebelumnya",className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-slate-600 transition-colors",children:a.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),a.jsx("h3",{id:D,"aria-live":"polite",className:"font-bold text-lg font-poppins text-gray-800 dark:text-white",children:o.toLocaleString("id-ID",{month:"long",year:"numeric"})}),a.jsx("button",{type:"button",onClick:F,"aria-label":"Bulan berikutnya",className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-slate-600 transition-colors",children:a.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})})]}),a.jsxs("div",{role:"grid","aria-labelledby":D,onKeyDown:N,children:[a.jsx("div",{role:"row",className:"grid grid-cols-7 gap-1",children:M.map((t,e)=>a.jsx("div",{role:"columnheader","aria-label":S[e],className:"text-center font-semibold text-sm text-gray-500 dark:text-gray-400 py-2",children:t},t))}),I.map((t,e)=>a.jsx("div",{role:"row",className:"grid grid-cols-7 gap-1",children:t.map((r,g)=>{if(!r)return a.jsx("div",{className:"p-1 h-10 w-10"},`empty-${e}-${g}`);const l=new Date;l.setHours(0,0,0,0);const n=r.toISOString().split("T")[0],i=r.getTime()===l.getTime(),y=h&&r.getTime()===new Date(h.setHours(0,0,0,0)).getTime(),u=r<l,k=x.has(n),L=u,Y=r.getTime()===s.getTime(),d=["w-10 h-10 rounded-full transition-colors duration-200 flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 dark:focus:ring-offset-slate-700"];return y?d.push("bg-primary text-white font-bold shadow-md"):k?(d.push("bg-red-200 text-red-700 dark:bg-red-800/50 dark:text-red-300 line-through"),u||d.push("hover:bg-red-300 dark:hover:bg-red-800/70")):L?d.push("text-gray-300 dark:text-gray-500 cursor-not-allowed"):(i&&d.push("bg-primary-light text-primary font-bold"),d.push("hover:bg-gray-200 dark:hover:bg-slate-600")),a.jsx("div",{role:"gridcell","aria-selected":y,className:"text-center p-1 flex justify-center items-center",children:a.jsx("button",{ref:w=>{w?p.current.set(n,w):p.current.delete(n)},type:"button",onClick:()=>!u&&H(r),disabled:u,tabIndex:Y?0:-1,"aria-label":r.toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})+(k?" (Penuh)":""),"aria-current":i?"date":void 0,"aria-disabled":u,className:d.join(" "),children:r.getDate()})},n)})},e))]})]})};export{K as O};
