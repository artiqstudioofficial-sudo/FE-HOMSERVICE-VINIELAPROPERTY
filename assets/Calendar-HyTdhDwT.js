import{r as u,j as s}from"./index-BgRtuNEX.js";const O=({selectedDate:h,onDateSelect:p,fullyBookedDates:y})=>{const[o,v]=u.useState(new Date),j=u.useMemo(()=>{const t=new Date;t.setHours(0,0,0,0);const e=h||t;return e.setHours(0,0,0,0),e},[h]),[a,f]=u.useState(j),m=u.useRef(new Map),x="calendar-heading",b=(t,e)=>{const r=new Date(t),c=r.getDate();r.setMonth(r.getMonth()+e,1);const i=new Date(r.getFullYear(),r.getMonth()+1,0).getDate();return r.setDate(Math.min(c,i)),r};u.useEffect(()=>{(a.getMonth()!==o.getMonth()||a.getFullYear()!==o.getFullYear())&&v(new Date(a.getFullYear(),a.getMonth(),1))},[a,o]),u.useEffect(()=>{const t=a.toISOString().split("T")[0],e=m.current.get(t);e&&e.focus()},[a]);const M=["Min","Sen","Sel","Rab","Kam","Jum","Sab"],S=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],N=t=>{t.preventDefault();let e=new Date(a);switch(t.key){case"ArrowRight":e.setDate(e.getDate()+1);break;case"ArrowLeft":e.setDate(e.getDate()-1);break;case"ArrowUp":e.setDate(e.getDate()-7);break;case"ArrowDown":e.setDate(e.getDate()+7);break;case"PageUp":e=b(a,t.shiftKey?-12:-1);break;case"PageDown":e=b(a,t.shiftKey?12:1);break;case"Home":e.setDate(e.getDate()-e.getDay());break;case"End":e.setDate(e.getDate()+(6-e.getDay()));break;case"Enter":case" ":const r=new Date;r.setHours(0,0,0,0);const c=a.toISOString().split("T")[0];a>=r&&!y.has(c)&&p(a);return;default:return}f(e)},F=()=>{f(t=>b(t,-1))},T=()=>{f(t=>b(t,1))},C=t=>{f(t),p(t)},I=u.useMemo(()=>{const t=new Date(o.getFullYear(),o.getMonth(),1),e=new Date(o.getFullYear(),o.getMonth()+1,0),r=t.getDay(),c=e.getDate(),i=[];let n=[];for(let l=0;l<r;l++)n.push(null);for(let l=1;l<=c;l++)n.length===7&&(i.push(n),n=[]),n.push(new Date(o.getFullYear(),o.getMonth(),l));for(;n.length<7;)n.push(null);return i.push(n),i},[o]);return s.jsxs("div",{className:"bg-white dark:bg-slate-700 border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("button",{type:"button",onClick:F,"aria-label":"Bulan sebelumnya",className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-slate-600 transition-colors",children:s.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),s.jsx("h3",{id:x,"aria-live":"polite",className:"font-bold text-lg font-poppins text-gray-800 dark:text-white",children:o.toLocaleString("id-ID",{month:"long",year:"numeric"})}),s.jsx("button",{type:"button",onClick:T,"aria-label":"Bulan berikutnya",className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-slate-600 transition-colors",children:s.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})})]}),s.jsxs("div",{role:"grid","aria-labelledby":x,onKeyDown:N,children:[s.jsx("div",{role:"row",className:"grid grid-cols-7 gap-1",children:M.map((t,e)=>s.jsx("div",{role:"columnheader","aria-label":S[e],className:"text-center font-semibold text-sm text-gray-500 dark:text-gray-400 py-2",children:t},t))}),I.map((t,e)=>s.jsx("div",{role:"row",className:"grid grid-cols-7 gap-1",children:t.map((r,c)=>{if(!r)return s.jsx("div",{className:"p-1 h-10 w-10"},`empty-${e}-${c}`);const i=new Date;i.setHours(0,0,0,0);const n=r.toISOString().split("T")[0],l=r.getTime()===i.getTime(),w=h&&r.getTime()===new Date(h.setHours(0,0,0,0)).getTime(),g=r<i,k=y.has(n),K=g,H=r.getTime()===a.getTime(),d=["w-10 h-10 rounded-full transition-colors duration-200 flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 dark:focus:ring-offset-slate-700"];return w?d.push("bg-primary text-white font-bold shadow-md"):k?(d.push("bg-red-200 text-red-700 dark:bg-red-800/50 dark:text-red-300 line-through"),g||d.push("hover:bg-red-300 dark:hover:bg-red-800/70")):K?d.push("text-gray-300 dark:text-gray-500 cursor-not-allowed"):(l&&d.push("bg-primary-light text-primary font-bold"),d.push("hover:bg-gray-200 dark:hover:bg-slate-600")),s.jsx("div",{role:"gridcell","aria-selected":w,className:"text-center p-1 flex justify-center items-center",children:s.jsx("button",{ref:D=>{D?m.current.set(n,D):m.current.delete(n)},type:"button",onClick:()=>!g&&C(r),disabled:g,tabIndex:H?0:-1,"aria-label":r.toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})+(k?" (Penuh)":""),"aria-current":l?"date":void 0,"aria-disabled":g,className:d.join(" "),children:r.getDate()})},n)})},e))]})]})};export{O as C};
