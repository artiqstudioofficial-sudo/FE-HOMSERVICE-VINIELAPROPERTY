import{c as X,r as n,j as e,u as Ee,b as Me,d as Ie,I as $e,R as Be}from"./index-BOS2NBN7.js";import{C as Fe}from"./Calendar-D5G9CgVU.js";import{f as ze,a as Ge}from"./admin-DdTG2enl.js";import{s as Ke}from"./notifications-D5TRqq6t.js";import{g as ge,a as Te,f as $,s as Oe}from"./storage-BHb65FEp.js";/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=X("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=X("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=X("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),He=({isOpen:f,onClose:h,bookingDetails:u})=>(n.useEffect(()=>{const l=c=>{c.key==="Escape"&&h()};return window.addEventListener("keydown",l),()=>{window.removeEventListener("keydown",l)}},[h]),f?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4 transition-opacity duration-300","aria-modal":"true",role:"dialog",onClick:h,children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-8 max-w-md w-full text-center transform transition-all scale-95 duration-300","data-aos":"zoom-in","data-aos-duration":"400",onClick:l=>l.stopPropagation(),children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4",children:e.jsx("svg",{className:"h-10 w-10 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-2xl font-bold font-poppins text-gray-800 dark:text-white",children:"Pesanan Diterima!"}),e.jsxs("p",{className:"text-secondary dark:text-slate-300 mt-2 mb-6",children:["Terima kasih, ",e.jsx("span",{className:"font-semibold text-gray-800 dark:text-white",children:u.name}),". Pesanan Anda telah berhasil kami catat."]}),e.jsxs("div",{className:"bg-light-bg dark:bg-slate-700 p-4 rounded-lg text-left space-y-2 border border-gray-200 dark:border-gray-600 text-gray-800 dark:text-white",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Layanan:"})," ",u.service]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Jadwal:"})," ",u.schedule]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 pt-2",children:"Kami akan segera menghubungi Anda melalui WhatsApp untuk konfirmasi lebih lanjut."})]}),e.jsx("button",{onClick:h,className:"mt-8 w-full bg-primary text-white font-bold px-8 py-3 rounded-lg hover:bg-primary-dark transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50",children:"Tutup"})]})}):null),Re=()=>e.jsxs("div",{className:"relative bg-dark-bg",children:[e.jsx("div",{className:"absolute inset-0",children:e.jsx("img",{loading:"lazy",src:"https://images.unsplash.com/photo-1587560699334-cc426240169f?q=80&w=2070&auto=format&fit=crop",alt:"Pesan Layanan",className:"w-full h-full object-cover opacity-30 dark:opacity-40"})}),e.jsxs("div",{className:"relative container mx-auto px-6 py-32 text-center text-white",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold font-poppins leading-tight","data-aos":"fade-up",children:"Pesan Layanan Profesional Dengan Mudah"}),e.jsx("p",{className:"text-lg max-w-2xl mx-auto text-gray-300 mt-4","data-aos":"fade-up","data-aos-delay":"100",children:"Hanya beberapa langkah untuk menjadwalkan teknisi ahli kami. Isi formulir di bawah ini dan biarkan kami yang mengurus sisanya."})]})]}),_e=({currentStep:f})=>{const h=["Info Kontak","Layanan","Jadwal","Konfirmasi"];return e.jsx("div",{className:"flex items-start justify-center mb-10 px-4","aria-label":"Progress",children:h.map((u,l)=>{const c=l+1,s=f>c,p=f===c;return e.jsxs(Be.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center text-center w-20",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 transition-all duration-300 ${s?"bg-primary border-primary text-white":p?"border-primary text-primary":"border-gray-300 dark:border-gray-600 text-gray-400"}`,children:s?e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}):e.jsx("span",{className:`font-bold ${p?"text-primary":"text-gray-400"}`,children:c})}),e.jsx("p",{className:`mt-2 text-xs font-semibold break-words ${p||s?"text-gray-800 dark:text-white":"text-gray-400"}`,children:u})]}),l<h.length-1&&e.jsx("div",{className:`flex-1 h-0.5 mt-5 transition-colors duration-300 ${s?"bg-primary":"bg-gray-200 dark:bg-gray-700"}`})]},u)})})},Ue=()=>{const[f]=Ee(),h=Me(),u=f.get("service")||"",[l,c]=n.useState(1),[s,p]=n.useState({name:"",whatsapp:"",address:"",service:"",startDate:null,endDate:null,time:""}),[m,j]=n.useState(null),[S,D]=n.useState(!1),[B,w]=n.useState(""),[he,L]=n.useState(!1),[Z,ee]=n.useState(""),[F,pe]=n.useState(""),[A,z]=n.useState(!1),[G,b]=n.useState(""),[x,y]=n.useState({}),[K,ae]=n.useState(!1),[ye,te]=n.useState(!1),{addNotification:v}=Ie(),[se,T]=n.useState(new Set),[be,O]=n.useState(new Set),[re,ne]=n.useState(null),[fe,ie]=n.useState(!1),[W,le]=n.useState([]),[q,oe]=n.useState(null),[ke,de]=n.useState(!1);n.useEffect(()=>{(async()=>{try{de(!0),oe(null);const t=await ze(),r={};t.forEach(d=>{const o=d.category||"Lainnya";r[o]||(r[o]=[]),r[o].push(d)});const i=Object.entries(r).map(([d,o])=>({category:d,services:o}));if(le(i),u){const d=t.find(o=>o.name.toLowerCase()===u.toLowerCase().trim());d&&p(o=>({...o,service:String(d.id)}))}}catch(t){console.error("Gagal memuat layanan dari API:",t),oe((t==null?void 0:t.message)||"Gagal memuat data layanan dari server. Silakan coba beberapa saat lagi."),le([])}finally{de(!1)}})()},[u]);const ce=n.useMemo(()=>W.flatMap(a=>a.services),[W]),g=n.useMemo(()=>{const a=Number(s.service);if(a)return ce.find(t=>Number(t.id)===a)},[s.service,ce]),H=(g==null?void 0:g.durationDays)||1;n.useEffect(()=>{let a=!0;return(async()=>{try{ie(!0),ne(null);const t=await ge();if(!a)return;const r=Array.isArray(t.fullyBookedDates)?t.fullyBookedDates:[],i=Array.isArray(t.bookedSlots)?t.bookedSlots:[];T(new Set(r)),O(new Set(i))}catch(t){if(console.error("Gagal load availability:",t),!a)return;ne((t==null?void 0:t.message)||"Gagal memuat availability"),T(new Set),O(new Set)}finally{a&&ie(!1)}})(),()=>{a=!1}},[]);const je=n.useMemo(()=>Te(9,17,12,13,30),[]),we=a=>{ee("");const t=new Date(a);t.setDate(t.getDate()+H-1);for(let r=new Date(a);r<=t;r.setDate(r.getDate()+1))if(se.has($(r))){ee(`Rentang tanggal yang dipilih (${a.toLocaleDateString("id-ID")} - ${t.toLocaleDateString("id-ID")}) tidak tersedia karena salah satu hari telah penuh.`);return}p(r=>({...r,startDate:a,endDate:t,time:""}))},C=a=>{const{name:t,value:r}=a.target;y(i=>({...i,[t]:void 0})),p(i=>({...i,[t]:r}))},ve=()=>{if(D(!0),w(""),b(""),L(!0),y(a=>({...a,location:void 0})),!navigator.geolocation){w("Geolocation tidak didukung oleh browser ini."),D(!1),L(!1);return}navigator.geolocation.getCurrentPosition(a=>{const{latitude:t,longitude:r}=a.coords;j({lat:t,lng:r}),b("Lokasi GPS berhasil ditemukan."),D(!1),L(!1)},a=>{let t="Gagal mendapatkan lokasi. Pastikan izin lokasi diaktifkan.";a.code===a.PERMISSION_DENIED&&(t="Anda menolak izin lokasi. Mohon izinkan akses untuk melanjutkan."),w(t),D(!1),L(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})},me=async()=>{var r,i,d;if(!F.trim()){b("Mohon masukkan alamat untuk dicari.");return}z(!0),w(""),b(""),y(o=>({...o,location:void 0}));const a=((r=process==null?void 0:process.env)==null?void 0:r.API_KEY)||((d=(i=import.meta)==null?void 0:i.env)==null?void 0:d.VITE_GOOGLE_MAPS_KEY);if(!a){console.error("Geocoding API Key is missing."),b("Fitur pencarian alamat saat ini tidak tersedia."),z(!1);return}const t=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(F)}&key=${a}`;try{const o=await fetch(t);if(!o.ok)throw new Error("Network response was not ok");const N=await o.json();if(N.status==="OK"&&N.results.length>0){const{lat:k,lng:Q}=N.results[0].geometry.location;j({lat:k,lng:Q}),b("Lokasi berhasil ditemukan dan ditandai di peta.")}else j(null),b("Alamat tidak ditemukan. Coba gunakan alamat yang lebih spesifik.")}catch(o){console.error("Geocoding API error:",o),j(null),b("Terjadi kesalahan saat mencari alamat. Silakan coba lagi.")}finally{z(!1)}},P=(a,t)=>{switch(a){case"name":if(!t.trim())return"Nama wajib diisi.";break;case"whatsapp":if(!t.trim())return"Nomor WhatsApp wajib diisi.";if(!/^(08|\+628)\d{8,12}$/.test(t))return"Format nomor WhatsApp tidak valid (contoh: 08123456789).";break;case"address":if(!t.trim())return"Alamat wajib diisi.";break}},R=a=>{const{name:t,value:r}=a.target,i=P(t,r);y(d=>({...d,[t]:i}))},_=()=>{const a={},t=P("name",s.name);t&&(a.name=t);const r=P("whatsapp",s.whatsapp);r&&(a.whatsapp=r);const i=P("address",s.address);return i&&(a.address=i),m||(a.location="Mohon tandai lokasi Anda."),y(a),Object.keys(a).length===0},U=()=>{const a={};return s.service||(a.service="Pilih layanan."),y(a),Object.keys(a).length===0},V=()=>{const a={};return s.startDate||(a.startDate="Pilih tanggal."),s.time||(a.time="Pilih waktu."),y(a),Object.keys(a).length===0},Ne=()=>{let a=!1;l===1&&(a=_()),l===2&&(a=U()),l===3&&(a=V()),a&&c(t=>t+1)},Se=()=>{y({}),c(a=>a-1)},De=async a=>{if(a.preventDefault(),!_()||!U()||!V()){_()?U()?V()||c(3):c(2):c(1);return}if(!m||!s.startDate){v("Lokasi atau tanggal belum terisi. Silakan lengkapi data.","error");return}const t=Number(s.service);if(!t||Number.isNaN(t)){v("Layanan tidak valid. Silakan pilih ulang layanan.","error"),c(2);return}if(fe){v("Sedang memuat slot jadwal. Coba lagi sebentar.","info");return}ae(!0);try{const r={fullname:s.name,whatsapp:s.whatsapp,service:t,address:s.address,lat:m.lat,lng:m.lng,schedule_date:Ge(s.startDate),schedule_time:s.time},i=await fetch("https://api-homeservice.viniela.id/api/v1/user/store-booking",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(r)});let d=null;try{d=await i.json()}catch{}if(!i.ok){const M=(d==null?void 0:d.message)||`Gagal menyimpan booking di server (status ${i.status}).`;throw new Error(M)}const o=(g==null?void 0:g.name)||u||"",N={id:Date.now(),name:s.name,whatsapp:s.whatsapp,address:s.address,service:o||String(t),startDate:s.startDate.toISOString(),endDate:(s.endDate??s.startDate).toISOString(),time:s.time,status:"Confirmed",technician:"Belum Ditugaskan",lat:m.lat,lng:m.lng},k=await ge(),Q=Array.isArray(k.bookedSlots)?k.bookedSlots:[],Ae=Array.isArray(k.fullyBookedDates)?k.fullyBookedDates:[],Ce=`${$(s.startDate)}-${s.time}`,ue=Array.from(new Set([...Q,Ce]));let E=[...Ae];if(H>1&&s.endDate){const M=new Set(E);for(let I=new Date(s.startDate);I<=s.endDate;I.setDate(I.getDate()+1))M.add($(I));E=Array.from(M)}await Oe({fullyBookedDates:E,bookedSlots:ue}),T(new Set(E)),O(new Set(ue));const Pe=Ke("order_created",N);v(Pe,"success"),te(!0)}catch(r){console.error("Gagal menyimpan booking:",r),v(`Gagal menyimpan booking: ${(r==null?void 0:r.message)||"Terjadi kesalahan tidak diketahui."}`,"error")}finally{ae(!1)}},Le=()=>{te(!1),p({name:"",whatsapp:"",address:"",service:"",startDate:null,endDate:null,time:""}),j(null),w(""),y({}),c(1),h("/services")},J=n.useMemo(()=>{if(!s.startDate)return"";const a=s.startDate.toLocaleDateString("id-ID",{weekday:"long",day:"numeric",month:"long"});if(!s.endDate||s.startDate.getTime()===s.endDate.getTime())return a;const t=s.endDate.toLocaleDateString("id-ID",{weekday:"long",day:"numeric",month:"long"});return`${a} - ${t}`},[s.startDate,s.endDate]),xe=(g==null?void 0:g.name)||u||"";return e.jsxs("section",{className:"py-24 bg-light-bg dark:bg-slate-900",children:[e.jsx("div",{className:"container mx-auto px-6",children:e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"w-full max-w-4xl bg-white dark:bg-slate-800 p-6 md:p-8 rounded-2xl shadow-xl","data-aos":"fade-up",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold font-poppins text-gray-800 dark:text-white mb-6 text-center",children:"Formulir Pemesanan Layanan"}),e.jsx(_e,{currentStep:l}),q&&e.jsx("div",{className:"mb-4 text-center text-sm text-red-500",children:q}),re&&e.jsx("div",{className:"mb-4 text-center text-sm text-red-500",children:re}),e.jsxs("form",{onSubmit:De,noValidate:!0,children:[e.jsxs("div",{className:"min-h-[420px] py-4",children:[l===1&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nama Lengkap"}),e.jsx("input",{type:"text",name:"name",id:"name",value:s.name,onChange:C,onBlur:R,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm dark:bg-slate-700 dark:border-slate-600 focus:border-primary focus:ring-primary",required:!0}),x.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:x.name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"whatsapp",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nomor WhatsApp"}),e.jsx("input",{type:"tel",name:"whatsapp",id:"whatsapp",value:s.whatsapp,onChange:C,onBlur:R,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm dark:bg-slate-700 dark:border-slate-600 focus:border-primary focus:ring-primary",placeholder:"08123456789",required:!0}),x.whatsapp&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:x.whatsapp})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Alamat Lengkap"}),e.jsx("textarea",{name:"address",id:"address",rows:3,value:s.address,onChange:C,onBlur:R,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm dark:bg-slate-700 dark:border-slate-600 focus:border-primary focus:ring-primary",placeholder:"Contoh: Jl. Mawar No. 10, RT 01/RW 02, Kelurahan, Kecamatan, Kota.",required:!0}),x.address&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:x.address})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Penanda Lokasi (Wajib)"}),e.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white",children:"Opsi 1: Gunakan Lokasi GPS"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Paling akurat jika Anda memesan dari lokasi pengerjaan."}),e.jsxs("button",{type:"button",onClick:ve,disabled:S||A,className:"inline-flex items-center justify-center gap-2 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-slate-800 bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 disabled:opacity-50",children:[S?e.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):e.jsx(We,{size:16}),e.jsx("span",{children:S?"Mencari GPS...":"Gunakan Lokasi Saat Ini"})]}),he&&e.jsxs("p",{className:"text-blue-600 dark:text-blue-400 text-xs mt-2 flex items-center gap-1.5",children:[e.jsx($e,{size:14}),"Mohon izinkan akses lokasi pada prompt browser Anda."]}),B&&e.jsx("p",{className:"text-red-500 text-xs mt-2",children:B})]}),e.jsxs("div",{className:"flex items-center my-4",children:[e.jsx("div",{className:"flex-grow border-t border-gray-300 dark:border-gray-600"}),e.jsx("span",{className:"flex-shrink mx-4 text-gray-500 dark:text-gray-400 text-sm font-semibold",children:"ATAU"}),e.jsx("div",{className:"flex-grow border-t border-gray-300 dark:border-gray-600"})]}),e.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white",children:"Opsi 2: Cari Alamat Manual"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Gunakan jika memesan untuk lokasi lain (misal: rumah orang tua)."}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("input",{type:"text",value:F,onChange:a=>pe(a.target.value),onKeyDown:a=>a.key==="Enter"&&me(),placeholder:"Contoh: Monas, Jakarta Pusat",className:"block w-full rounded-md border-gray-300 shadow-sm dark:bg-slate-700 dark:border-slate-600 focus:border-primary focus:ring-primary"}),e.jsxs("button",{type:"button",onClick:me,disabled:A||S,className:"inline-flex items-center justify-center gap-2 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary hover:bg-primary-dark disabled:bg-gray-400",children:[A?e.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):e.jsx(qe,{size:16}),e.jsx("span",{children:A?"Mencari...":"Cari"})]})]})]}),x.location&&!B&&!G&&e.jsx("p",{className:"text-red-500 text-xs mt-2",children:x.location}),G&&e.jsx("p",{className:`text-xs mt-2 ${m?"text-green-600 dark:text-green-400":"text-red-500"}`,children:G}),m&&e.jsx("div",{className:"mt-4 rounded-lg overflow-hidden h-48 shadow-md border dark:border-slate-600",children:e.jsx("iframe",{title:"Location Preview",width:"100%",height:"100%",style:{border:0},loading:"lazy",allowFullScreen:!1,src:`https://maps.google.com/maps?q=${m.lat},${m.lng}&z=16&output=embed`},`${m.lat}-${m.lng}`)})]})]}),l===2&&e.jsx("div",{className:"space-y-6 animate-fade-in",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"service",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Pilih Layanan"}),e.jsxs("select",{name:"service",id:"service",value:s.service,onChange:C,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm dark:bg-slate-700 dark:border-slate-600 focus:border-primary focus:ring-primary text-base p-3",required:!0,disabled:ke||!!q,children:[e.jsx("option",{value:"",disabled:!0,children:"-- Pilih salah satu --"}),W.map(a=>e.jsx("optgroup",{label:a.category,children:a.services.map(t=>e.jsx("option",{value:String(t.id),children:t.name},t.id??t.name))},a.category))]}),x.service&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:x.service}),g&&e.jsxs("div",{className:"mt-4 p-3 bg-primary-light dark:bg-slate-700/50 rounded-lg text-sm text-primary-dark dark:text-teal-300",children:["Estimasi durasi pengerjaan: ",e.jsxs("strong",{children:[H," hari"]}),". Kalender akan otomatis memilih rentang tanggal yang dibutuhkan."]})]})}),l===3&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pilih Tanggal Mulai"}),e.jsx(Fe,{selectedDate:s.startDate,onDateSelect:we,fullyBookedDates:se}),x.startDate&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:x.startDate}),Z&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:Z})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pilih Waktu Mulai"}),s.startDate?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-3 bg-primary-light dark:bg-slate-700/50 rounded-lg text-sm text-primary-dark dark:text-teal-300 mb-4",children:[e.jsx("p",{children:e.jsx("strong",{children:"Tanggal Terpilih:"})}),e.jsx("p",{children:J})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:je.map(a=>{const t=`${$(s.startDate)}-${a}`,r=be.has(t);return e.jsx("button",{type:"button",onClick:()=>p(i=>({...i,time:a})),disabled:r,className:`p-2 rounded-md text-sm font-semibold border-2 transition-colors ${s.time===a?"bg-primary text-white border-primary":"bg-transparent border-gray-300 dark:border-slate-600"} ${r?"bg-gray-200 dark:bg-slate-600 text-gray-400 dark:text-gray-500 line-through cursor-not-allowed":"hover:border-primary"}`,children:a},a)})})]}):e.jsx("div",{className:"text-center p-8 bg-gray-50 dark:bg-slate-700/50 rounded-lg h-full flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pilih tanggal untuk melihat slot waktu."})}),x.time&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:x.time})]})]}),l===4&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Konfirmasi Pesanan Anda"}),e.jsxs("div",{className:"bg-light-bg dark:bg-slate-700/50 p-4 rounded-lg space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Info Kontak"}),e.jsx("p",{className:"font-semibold text-gray-800 dark:text-white",children:s.name}),e.jsx("p",{className:"text-gray-600 dark:text-slate-300",children:s.whatsapp}),e.jsx("p",{className:"text-gray-600 dark:text-slate-300 max-w-xs",children:s.address})]}),e.jsxs("button",{type:"button",onClick:()=>c(1),className:"text-primary hover:underline text-sm font-semibold flex items-center gap-1",children:[e.jsx(Y,{size:12})," Ubah"]})]}),e.jsxs("div",{className:"flex justify-between items-center border-t border-gray-200 dark:border-slate-600 pt-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Layanan"}),e.jsx("p",{className:"font-semibold text-gray-800 dark:text-white",children:xe||"-"})]}),e.jsxs("button",{type:"button",onClick:()=>c(2),className:"text-primary hover:underline text-sm font-semibold flex items-center gap-1",children:[e.jsx(Y,{size:12})," Ubah"]})]}),e.jsxs("div",{className:"flex justify-between items-center border-t border-gray-200 dark:border-slate-600 pt-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Jadwal"}),e.jsxs("p",{className:"font-semibold text-gray-800 dark:text-white",children:[J," - ",s.time]})]}),e.jsxs("button",{type:"button",onClick:()=>c(3),className:"text-primary hover:underline text-sm font-semibold flex items-center gap-1",children:[e.jsx(Y,{size:12})," Ubah"]})]})]}),m&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pratinjau Lokasi"}),e.jsx("div",{className:"rounded-lg overflow-hidden h-32 shadow-md border dark:border-slate-600",children:e.jsx("iframe",{title:"Location Preview",width:"100%",height:"100%",style:{border:0},loading:"lazy",allowFullScreen:!1,src:`https://maps.google.com/maps?q=${m.lat},${m.lng}&z=16&output=embed`})})]})]})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-700 flex justify-between items-center",children:[l>1?e.jsx("button",{type:"button",onClick:Se,className:"bg-gray-200 text-gray-800 dark:bg-slate-600 dark:text-gray-200 font-bold px-6 py-3 rounded-lg hover:bg-gray-300 dark:hover:bg-slate-500 transition-colors",children:"Kembali"}):e.jsx("div",{}),l<4&&e.jsx("button",{type:"button",onClick:Ne,className:"bg-primary text-white font-bold px-6 py-3 rounded-lg hover:bg-primary-dark transition-colors",children:"Lanjut"}),l===4&&e.jsxs("button",{type:"submit",disabled:K,className:"w-full sm:w-auto bg-primary text-white font-bold px-8 py-3 rounded-lg hover:bg-primary-dark transition-all duration-300 disabled:bg-gray-400 flex items-center justify-center",children:[K&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),K?"Mengirim...":"Kirim Pesanan"]})]})]})]})})}),e.jsx(He,{isOpen:ye,onClose:Le,bookingDetails:{name:s.name,service:xe||"-",schedule:`${J} pukul ${s.time}`}})]})},Ze=()=>e.jsxs(e.Fragment,{children:[e.jsx(Re,{}),e.jsx(Ue,{})]});export{Ze as default};
